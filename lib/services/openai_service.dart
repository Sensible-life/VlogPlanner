import 'package:http/http.dart' as http;
import 'dart:convert';
import '../config/api_config.dart';

class OpenAIService {
  static const String _baseUrl = 'https://api.openai.com/v1/chat/completions';
  static const String _model = 'gpt-4';
  
  static Future<String?> generateResponse(String prompt) async {
    if (!ApiConfig.isApiKeySet) {
      print('[OPENAI_API] API 키가 설정되지 않음');
      throw Exception('OpenAI API 키가 설정되지 않았습니다.');
    }
    
    print('[OPENAI_API] API 키 확인됨: ${ApiConfig.apiKey?.substring(0, 10)}...');
    
    try {
      print('[OPENAI_API] HTTP 요청 시작...');
      final response = await http.post(
        Uri.parse(_baseUrl),
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ${ApiConfig.apiKey}',
        },
        body: jsonEncode({
          'model': _model,
          'messages': [
            {
              'role': 'system',
              'content': 'You are a helpful assistant that generates v-log cue cards for theme park beginners. Always respond in Korean for user-facing content.',
            },
            {
              'role': 'user',
              'content': prompt,
            },
          ],
          'temperature': 0.7,
          'max_tokens': 3000,
        }),
      );
      
      print('[OPENAI_API] HTTP 응답 상태 코드: ${response.statusCode}');
      print('[OPENAI_API] HTTP 응답 바디 길이: ${response.body.length}');
      
      if (response.statusCode == 200) {
        final data = jsonDecode(response.body);
        final content = data['choices'][0]['message']['content'];
        print('[OPENAI_API] 응답 내용 길이: ${content.length}');
        return content;
      } else {
        print('[OPENAI_API] API 오류: ${response.statusCode} - ${response.body}');
        return null;
      }
    } catch (e) {
      print('[OPENAI_API] API 호출 중 오류: $e');
      return null;
    }
  }
  
  // 시뮬레이션용 메서드 (API 키가 없을 때 사용)
  static Future<String?> generateSimulatedResponse(String prompt) async {
    await Future.delayed(const Duration(seconds: 2));
    
    if (prompt.contains('CueTemplate')) {
      return '''
[
  {
    "scene_type": "opening",
    "when": "입구 표지판 보일 때",
    "len_sec": [20, 40],
    "camera": ["와이드→미드"],
    "action": ["입구 촬영", "환기 나레이션"],
    "audio": ["나레이션 70%", "밝은 톤"],
    "checklist": ["노출 고정", "마이크 확인", "포커스 락"],
    "fallback": "사람 많으면 인서트 촬영",
    "placeholders": ["{동행자}", "{날씨}", "{장소}"],
    "style_tone": "밝고 경쾌",
    "style_vibe": "MZ"
  },
  {
    "scene_type": "main",
    "when": "메인 어트랙션 대기열",
    "len_sec": [30, 60],
    "camera": ["미드→클로즈업"],
    "action": ["대기 상황 촬영", "기대감 나레이션"],
    "audio": ["나레이션 50%", "현장음 50%"],
    "checklist": ["노출 고정", "마이크 확인", "포커스 락"],
    "fallback": "대기 시간 길면 컷어웨이",
    "placeholders": ["{동행자}", "{대기시간}", "{어트랙션}"],
    "style_tone": "밝고 경쾌",
    "style_vibe": "MZ"
  },
  {
    "scene_type": "main",
    "when": "어트랙션 탑승 시",
    "len_sec": [60, 120],
    "camera": ["POV", "와이드"],
    "action": ["탑승 과정 촬영", "감정 표현"],
    "audio": ["현장음 80%", "나레이션 20%"],
    "checklist": ["안전 고정", "마이크 확인", "포커스 락"],
    "fallback": "촬영 금지시 VO 녹음",
    "placeholders": ["{동행자}", "{어트랙션}", "{감정}"],
    "style_tone": "밝고 경쾌",
    "style_vibe": "MZ"
  },
  {
    "scene_type": "reaction",
    "when": "어트랙션 하차 후",
    "len_sec": [15, 30],
    "camera": ["클로즈업", "미드"],
    "action": ["감정 표현", "후기 나레이션"],
    "audio": ["나레이션 90%", "현장음 10%"],
    "checklist": ["노출 고정", "마이크 확인", "포커스 락"],
    "fallback": "민망하면 인서트 촬영",
    "placeholders": ["{동행자}", "{어트랙션}", "{감정}"],
    "style_tone": "밝고 경쾌",
    "style_vibe": "MZ"
  },
  {
    "scene_type": "food",
    "when": "간식 구매 후",
    "len_sec": [20, 40],
    "camera": ["클로즈업", "미드"],
    "action": ["간식 촬영", "맛 리뷰"],
    "audio": ["나레이션 80%", "현장음 20%"],
    "checklist": ["화이트밸런스", "마이크 확인", "포커스 락"],
    "fallback": "먹기 전에만 촬영",
    "placeholders": ["{동행자}", "{간식}", "{맛}"],
    "style_tone": "밝고 경쾌",
    "style_vibe": "MZ"
  },
  {
    "scene_type": "ending",
    "when": "출구 근처",
    "len_sec": [20, 40],
    "camera": ["와이드→미드"],
    "action": ["마무리 촬영", "감사 인사"],
    "audio": ["나레이션 90%", "현장음 10%"],
    "checklist": ["노출 고정", "마이크 확인", "포커스 락"],
    "fallback": "사람 많으면 인서트",
    "placeholders": ["{동행자}", "{장소}", "{감정}"],
    "style_tone": "밝고 경쾌",
    "style_vibe": "MZ"
  }
]
''';
    } else if (prompt.contains('Plan JSON')) {
      return '''
{
  "goal_duration_min": 8,
  "buffer_rate": 0.12,
  "chapters": [
    {"id":"opening_gate","alloc_sec":35,"alternatives":[]},
    {"id":"move_in","alloc_sec":30,"alternatives":["move_cutaway"]},
    {"id":"main_ride_queue","alloc_sec":45,"alternatives":["map_board_reaction"]},
    {"id":"main_ride_pov","alloc_sec":90,"alternatives":["main_ride_vo"]},
    {"id":"reaction_post_ride","alloc_sec":25,"alternatives":["reaction_text_overlay"]},
    {"id":"food_snack","alloc_sec":35,"alternatives":["food_insert_only"]},
    {"id":"photo_spot","alloc_sec":40,"alternatives":["alt_background"]},
    {"id":"rest_bench","alloc_sec":30,"alternatives":["standing_rest"]},
    {"id":"ending_exit","alloc_sec":35,"alternatives":["sign_static_vo"]}
  ]
}
''';
    } else {
      return '''
## 오월드 도착!  ⏱ 30s | 🏷 entrance

**요약**
- 오월드 도착! · 친구들과 함께!
- 게이트 앞에서 소개

**스텝 (3)**
1) 게이트 앞 서기
2) 소개 멘트 하기
3) 마이크 체크

**체크 (3)**
- 노출 고정
- 마이크 확인
- 포커스 락

**대안**
- 셀카로 짧게

**힌트**
- ▶ 시작: 표지판 앞 시작
- ⏹ 정지: 소개 끝
- 🎯 완료: 인사 완료·친구 2명 등장

**스타일**
- 톤: 밝고 경쾌 / 바이브: 캐주얼 / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 상1/3 구도
- 무브먼트: 고정3초
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 입 30~40cm

**대화/나레이션**
- "오월드 왔다!"
- "오늘 코스는?"
- "함께한 친구는?"

**편집 힌트**
- 인서트→멘트

**안전/권한**
- 통행 방해 금지

**B-roll 제안**
- 입구 간판
- 티켓 손샷
- 손 인사
</details>

## 들어가면서 걷기  ⏱ 20s | 🏷 moving

**요약**
- 들어가며 걷기 · 풍경 즐기기
- 친구와 대화

**스텝 (3)**
1) 친구와 걷기
2) 경치 둘러보기
3) 가볍게 대화

**체크 (3)**
- 흔들림 방지
- 노출 확인
- OK

**대안**
- 풍경만 스케치

**힌트**
- ▶ 시작: 통과 직후 시작
- ⏹ 정지: 첫 어트 보일 때
- 🎯 완료: 10–20초 워킹·배경 전환

**스타일**
- 톤: 경쾌·활기찬 / 바이브: MZ / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: POV 중앙선
- 무브먼트: 부드럽게 워킹
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 바람 가리고 말하기

**대화/나레이션**
- "첫인상 어때?"
- "가장 기대는?"
- "오늘 목표는?"

**편집 힌트**
- 워킹 5초 컷

**안전/권한**
- 보행자 우선

**B-roll 제안**
- 발걸음
- 표지판 스윕
- 좌우 풍경
</details>

## 줄 서며 대기  ⏱ 40s | 🏷 queue

**요약**
- 줄 서며 대기 · 친구와 대화
- 기대감 표현

**스텝 (3)**
1) 둘러보기
2) 친구와 대화
3) 카메라 멘트

**체크 (3)**
- 포커스 락
- 노출 고정
- 주변 동의

**대안**
- 음식/사물만 촬영

**힌트**
- ▶ 시작: 줄 시작 시
- ⏹ 정지: 안전요원 근접
- 🎯 완료: 3–4문장·줄 분위기

**스타일**
- 톤: 자연·편안 / 바이브: 일상 / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 허리~가슴샷
- 무브먼트: 고정+리액션
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 소음 피해서 말해

**대화/나레이션**
- "대기 몇 분?"
- "기대 포인트?"
- "초보 팁은?"

**편집 힌트**
- 대화 키컷

**안전/권한**
- 줄 이탈 금지

**B-roll 제안**
- 안내 표지
- 기구 전경
- 대기줄 발
</details>

## 놀이기구 탑승  ⏱ 90s | 🏷 main_ride

**요약**
- 놀이기구 탑승 · 긴장감 즐기기
- 감정 표현

**스텝 (3)**
1) 긴장 멘트
2) 안전바 내리기
3) 요원 보며 웃기

**체크 (3)**
- 포커스 락
- 손떨림 방지
- OK

**대안**
- 외부 전경 컷

**힌트**
- ▶ 시작: 좌석 앉자마자
- ⏹ 정지: 작동 직전
- 🎯 완료: 전후 촬영·표정 클로즈업

**스타일**
- 톤: 기대감·긴장 / 바이브: 시네마틱 / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 얼굴+안전바
- 무브먼트: 고정 촬영
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 레벨 확인 후 말해

**대화/나레이션**
- "시작 전 한마디"
- "지금 심정은?"
- "끝나면 뭐함?"

**편집 힌트**
- 스타트음에 컷

**안전/권한**
- 촬영 규정 준수

**B-roll 제안**
- 바퀴·레일
- 안전수칙 표
- 관중 환호
</details>

## 탑승 후 소감  ⏱ 30s | 🏷 post_ride

**요약**
- 탑승 후 소감 · 놀란 표정 포착
- 짧은 감상평

**스텝 (3)**
1) 숨 고르기
2) 놀란 표정
3) 소감 한마디

**체크 (3)**
- 흔들림 방지
- 소리 조절
- OK

**대안**
- 자막 코멘트

**힌트**
- ▶ 시작: 하차 직후
- ⏹ 정지: 소감 끝
- 🎯 완료: 표정 클로즈업·짧은 감상평

**스타일**
- 톤: 신나고 유쾌 / 바이브: MZ / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 페이스샷 근접
- 무브먼트: 짧게 핸드헬드
- 노출/포커스: 얼굴 우선

**오디오(Pro)**
- 숨 고르고 말해

**대화/나레이션**
- "점수는 몇 점?"
- "제일 무서웠던?"
- "다시 탈래?"

**편집 힌트**
- 리액션→컷

**안전/권한**
- 통행로 비켜

**B-roll 제안**
- 안전바 손
- 하이파이브
- 기구 멀리샷
</details>

## 간식 먹방  ⏱ 50s | 🏷 snack

**요약**
- 간식 먹방 · 맛 표현하기
- 한입 리액션

**스텝 (3)**
1) 음식 클로즈업
2) 한 입 먹기
3) 맛 한줄 평가

**체크 (3)**
- 음식 포커스
- 조명 확인
- OK

**대안**
- 음식 접사 대체

**힌트**
- ▶ 시작: 받자마자
- ⏹ 정지: 한입 끝
- 🎯 완료: 먹는 소리·짧은 맛 설명

**스타일**
- 톤: 맛있고 따뜻함 / 바이브: 일상 / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 음식 근접
- 무브먼트: 살짝 회전
- 노출/포커스: WB 확인

**오디오(Pro)**
- 씹는 소리 적당

**대화/나레이션**
- "첫맛은 어때?"
- "식감 어때?"
- "가성비 어때?"

**편집 힌트**
- 한입에 컷

**안전/권한**
- 매장 동선 배려

**B-roll 제안**
- 메뉴판
- 가격표
- 손 한입 샷
</details>

## 벤치에서 휴식  ⏱ 45s | 🏷 rest_area

**요약**
- 벤치에서 휴식 · 친구와 이야기
- 정리 대화

**스텝 (3)**
1) 음료 마시기
2) 정리 대화
3) 풍경 찍기

**체크 (3)**
- 고정 촬영
- 음량 확인
- OK

**대안**
- 풍경만 촬영

**힌트**
- ▶ 시작: 앉자마자
- ⏹ 정지: 이동 전
- 🎯 완료: 5–10문장·친구 2명

**스타일**
- 톤: 평화·차분 / 바이브: 시네마틱 / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 투샷 중앙
- 무브먼트: 고정 롱테이크
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 주변 소음 최소

**대화/나레이션**
- "오늘 하이라이트?"
- "힘들었던 점?"
- "다음 계획은?"

**편집 힌트**
- 대화 호흡컷

**안전/권한**
- 주변 손님 배려

**B-roll 제안**
- 음료 컵샷
- 손 제스처
- 벤치 표식
</details>

## 포토존에서 사진  ⏱ 45s | 🏷 photo_spot

**요약**
- 포토존에서 사진 · 인생샷 남기기
- 다양한 포즈

**스텝 (3)**
1) 친구 2명 포즈
2) 카메라 보고 웃기
3) 다양한 구도

**체크 (3)**
- 노출 고정
- 손떨림 방지
- OK

**대안**
- 배경만 촬영

**힌트**
- ▶ 시작: 발견 즉시
- ⏹ 정지: 촬영 완료
- 🎯 완료: 다양한 포즈·장소 특색

**스타일**
- 톤: 신나고 유쾌 / 바이브: MZ / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 배경 정리
- 무브먼트: 포즈 전환
- 노출/포커스: 고정

**오디오(Pro)**
- 현장 소리 짧게

**대화/나레이션**
- "이 장소 포인트?"
- "포즈 컨셉은?"
- "한마디 외치기"

**편집 힌트**
- 베스트샷 2컷

**안전/권한**
- 길막 금지

**B-roll 제안**
- 장소 표식
- 포즈 실루엣
- 돌아보기 샷
</details>

## 마지막 인사  ⏱ 20s | 🏷 exit

**요약**
- 마지막 인사 · 오늘의 소감
- 다음 예고

**스텝 (3)**
1) 출구 앞 서기
2) 소감 말하기
3) 다음 예고

**체크 (3)**
- 마이크 확인
- 노출 고정
- OK

**대안**
- 간판 정지컷

**힌트**
- ▶ 시작: 출구 앞 시작
- ⏹ 정지: 인사 끝
- 🎯 완료: 감상평 완료·친구 2명

**스타일**
- 톤: 따뜻·감동적 / 바이브: 시네마틱 / 타깃: 20대 친구

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 중앙+출구
- 무브먼트: 고정3초
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 바람 등지고 말해

**대화/나레이션**
- "오늘 어땠나?"
- "하이라이트는?"
- "다음은 어디?"

**편집 힌트**
- 자막 엔드

**안전/권한**
- 통행 방해 금지

**B-roll 제안**
- 출구 간판
- 하늘 스윕
- 퇴장 발샷
</details>

---

### 들어가면서 걷기  ⏱ 20s | 🏷 moving

**요약**: 들어가며 걷기 · 풍경 즐기기
**스텝**: 친구와 걷기 · 경치 둘러보기 · 가볍게 대화
**체크**: 흔들림 방지 · 노출 확인 · OK
**대안**: 풍경만 스케치
**힌트**: ▶ 통과 직후 시작 | ⏹ 첫 어트 보일 때 | 🎯 10–20초 워킹·배경 전환
**스타일**: 경쾌·활기찬 / MZ / 20대 친구
**Pro**: 프레임 POV 중앙선 · 무브 부드럽게 워킹 · 노출 AE/AF고정 | 오디오 바람 가리고 말하기 | 대화 첫인상 어때? / 가장 기대는? / 오늘 목표는? | 편집 워킹 5초 컷 | 안전 보행자 우선 | B-roll 발걸음 / 표지판 스윕 / 좌우 풍경

---

### 줄 서며 대기  ⏱ 40s | 🏷 queue

**요약**: 줄 서며 대기 · 친구와 대화
**스텝**: 둘러보기 · 친구와 대화 · 카메라 멘트
**체크**: 포커스 락 · 노출 고정 · 주변 동의
**대안**: 음식/사물만 촬영
**힌트**: ▶ 줄 시작 시 | ⏹ 안전요원 근접 | 🎯 3–4문장·줄 분위기
**스타일**: 자연·편안 / 일상 / 20대 친구
**Pro**: 프레임 허리~가슴샷 · 무브 고정+리액션 · 노출 AE/AF고정 | 오디오 소음 피해서 말해 | 대화 대기 몇 분? / 기대 포인트? / 초보 팁은? | 편집 대화 키컷 | 안전 줄 이탈 금지 | B-roll 안내 표지 / 기구 전경 / 대기줄 발

---

### 놀이기구 탑승  ⏱ 90s | 🏷 main_ride

**요약**: 놀이기구 탑승 · 긴장감 즐기기
**스텝**: 긴장 멘트 · 안전바 내리기 · 요원 보며 웃기
**체크**: 포커스 락 · 손떨림 방지 · OK
**대안**: 외부 전경 컷
**힌트**: ▶ 좌석 앉자마자 | ⏹ 작동 직전 | 🎯 전후 촬영·표정 클로즈업
**스타일**: 기대감·긴장 / 시네마틱 / 20대 친구
**Pro**: 프레임 얼굴+안전바 · 무브 고정 촬영 · 노출 AE/AF고정 | 오디오 레벨 확인 후 말해 | 대화 시작 전 한마디 / 지금 심정은? / 끝나면 뭐함? | 편집 스타트음에 컷 | 안전 촬영 규정 준수 | B-roll 바퀴·레일 / 안전수칙 표 / 관중 환호

---

### 탑승 후 소감  ⏱ 30s | 🏷 post_ride

**요약**: 탑승 후 소감 · 놀란 표정 포착
**스텝**: 숨 고르기 · 놀란 표정 · 소감 한마디
**체크**: 흔들림 방지 · 소리 조절 · OK
**대안**: 자막 코멘트
**힌트**: ▶ 하차 직후 | ⏹ 소감 끝 | 🎯 표정 클로즈업·짧은 감상평
**스타일**: 신나고 유쾌 / MZ / 20대 친구
**Pro**: 프레임 페이스샷 근접 · 무브 짧게 핸드헬드 · 노출 얼굴 우선 | 오디오 숨 고르고 말해 | 대화 점수는 몇 점? / 제일 무서웠던? / 다시 탈래? | 편집 리액션→컷 | 안전 통행로 비켜 | B-roll 안전바 손 / 하이파이브 / 기구 멀리샷

---

### 간식 먹방  ⏱ 50s | 🏷 snack

**요약**: 간식 먹방 · 맛 표현하기
**스텝**: 음식 클로즈업 · 한 입 먹기 · 맛 한줄 평가
**체크**: 음식 포커스 · 조명 확인 · OK
**대안**: 음식 접사 대체
**힌트**: ▶ 받자마자 | ⏹ 한입 끝 | 🎯 먹는 소리·짧은 맛 설명
**스타일**: 맛있고 따뜻함 / 일상 / 20대 친구
**Pro**: 프레임 음식 근접 · 무브 살짝 회전 · 노출 WB 확인 | 오디오 씹는 소리 적당 | 대화 첫맛은 어때? / 식감 어때? / 가성비 어때? | 편집 한입에 컷 | 안전 매장 동선 배려 | B-roll 메뉴판 / 가격표 / 손 한입 샷

---

### 벤치에서 휴식  ⏱ 45s | 🏷 rest_area

**요약**: 벤치에서 휴식 · 친구와 이야기
**스텝**: 음료 마시기 · 정리 대화 · 풍경 찍기
**체크**: 고정 촬영 · 음량 확인 · OK
**대안**: 풍경만 촬영
**힌트**: ▶ 앉자마자 | ⏹ 이동 전 | 🎯 5–10문장·친구 2명
**스타일**: 평화·차분 / 시네마틱 / 20대 친구
**Pro**: 프레임 투샷 중앙 · 무브 고정 롱테이크 · 노출 AE/AF고정 | 오디오 주변 소음 최소 | 대화 오늘 하이라이트? / 힘들었던 점? / 다음 계획은? | 편집 대화 호흡컷 | 안전 주변 손님 배려 | B-roll 음료 컵샷 / 손 제스처 / 벤치 표식

---

### 포토존에서 사진  ⏱ 45s | 🏷 photo_spot

**요약**: 포토존에서 사진 · 인생샷 남기기
**스텝**: 친구 2명 포즈 · 카메라 보고 웃기 · 다양한 구도
**체크**: 노출 고정 · 손떨림 방지 · OK
**대안**: 배경만 촬영
**힌트**: ▶ 발견 즉시 | ⏹ 촬영 완료 | 🎯 다양한 포즈·장소 특색
**스타일**: 신나고 유쾌 / MZ / 20대 친구
**Pro**: 프레임 배경 정리 · 무브 포즈 전환 · 노출 고정 | 오디오 현장 소리 짧게 | 대화 이 장소 포인트? / 포즈 컨셉은? / 한마디 외치기 | 편집 베스트샷 2컷 | 안전 길막 금지 | B-roll 장소 표식 / 포즈 실루엣 / 돌아보기 샷

---

### 두 번째 대기  ⏱ 40s | 🏷 queue

**요약**: 두 번째 대기 · 기대감 표현
**스텝**: 주변 둘러보기 · 웃는 대화 · 카메라 장난
**체크**: 포커스 락 · 노출 고정 · 주변 동의
**대안**: 음식/사물만 촬영
**힌트**: ▶ 2번째 줄 시작 | ⏹ 탑승 직전 | 🎯 줄 분위기·짧은 대화
**스타일**: 자연·편안 / 일상 / 20대 친구
**Pro**: 프레임 허리샷 투샷 · 무브 고정 리액션 · 노출 AE/AF고정 | 오디오 소음 피해서 말해 | 대화 이번 각오는? / 얼마나 남았나? / 팁 한줄 말해 | 편집 대화 하이라이트 | 안전 타인 동의 주의 | B-roll 시간 안내판 / 신발 리듬샷 / 표정 클로즈업

---

### 두 번째 놀이기구  ⏱ 70s | 🏷 main_ride

**요약**: 두 번째 놀이기구 · 짜릿한 순간 포착
**스텝**: 긴장 멘트 · 안전바 내리기 · 출발 신호 대기
**체크**: 포커스 락 · 손떨림 방지 · OK
**대안**: 외부 전경 컷
**힌트**: ▶ 2번째 좌석 착석 | ⏹ 작동 직전 | 🎯 탑승 직전 촬영·표정 변화
**스타일**: 기대감·긴장 / 시네마틱 / 20대 친구
**Pro**: 프레임 얼굴+안전바 · 무브 고정 촬영 · 노출 AE/AF고정 | 오디오 레벨 과다 주의 | 대화 두근두근! / 살짝 떨린다 / 끝나고 뭐함? | 편집 출발음에 컷 | 안전 촬영 규정 준수 | B-roll 트랙 전경 / 표정 클로즈업 / 안전수칙 표

---

### 마지막 인사  ⏱ 20s | 🏷 exit

**요약**: 마지막 인사 · 오늘의 소감
**스텝**: 출구 앞 서기 · 소감 말하기 · 다음 예고
**체크**: 마이크 확인 · 노출 고정 · OK
**대안**: 간판 정지컷
**힌트**: ▶ 출구 앞 시작 | ⏹ 인사 끝 | 🎯 감상평 완료·친구 2명
**스타일**: 따뜻·감동적 / 시네마틱 / 20대 친구
**Pro**: 프레임 중앙+출구 · 무브 고정3초 · 노출 AE/AF고정 | 오디오 바람 등지고 말해 | 대화 오늘 어땠나? / 하이라이트는? / 다음은 어디? | 편집 자막 엔드 | 안전 통행 방해 금지 | B-roll 출구 간판 / 하늘 스윕 / 퇴장 발샷
- 노출 고정
- 마이크 확인
- 포커스 락

**대안**
- 사람 많으면 인서트 촬영

**힌트**
- ▶ 시작: 표지판 보일 때
- ⏹ 정지: 나레이션 완료
- 🎯 완료: 표지판 + 나레이션

**스타일**
- 톤: 밝고 경쾌 / 바이브: MZ / 타깃: 20대

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 상1/3 구도
- 무브먼트: 워킹 최소
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 입 30~40cm

**대화/나레이션**
- "드디어 도착했어요!"
- "오늘 날씨 완전 좋네요"
- "기대돼요!"

**편집 힌트**
- 인서트→점프컷

**안전/권한**
- 통행 방해 금지

**B-roll 제안**
- 표지판 클로즈업
- 하늘 촬영
- 발걸음
</details>

## 메인 어트랙션 대기
> ⏱ 45s | 🏷 Trigger: `queue`

**요약**
- 대기 상황 촬영
- 기대감 나레이션

**스텝 (3)**
1) 대기열 위치 확인
2) 미드→클로즈업 촬영
3) 기대감 표현

**체크 (3)**
- 노출 고정
- 마이크 확인
- 포커스 락

**대안**
- 대기 시간 길면 컷어웨이

**힌트**
- ▶ 시작: 대기열 도착
- ⏹ 정지: 탑승 직전
- 🎯 완료: 대기 + 기대감

**스타일**
- 톤: 밝고 경쾌 / 바이브: MZ / 타깃: 20대

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: 중앙 구도
- 무브먼트: 정적 촬영
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 입 20~30cm

**대화/나레이션**
- "대기 시간 얼마나 될까요?"
- "정말 기대돼요!"
- "사람들이 많네요"

**편집 힌트**
- 점프컷→슬로우모션

**안전/권한**
- 대기열 순서 준수

**B-roll 제안**
- 대기열 전체
- 시계 촬영
- 주변 풍경
</details>

## 어트랙션 탑승
> ⏱ 90s | 🏷 Trigger: `main_ride`

**요약**
- 탑승 과정 촬영
- 감정 표현

**스텝 (3)**
1) 안전장치 착용
2) POV 촬영 시작
3) 감정 표현

**체크 (3)**
- 안전 고정
- 마이크 확인
- 포커스 락

**대안**
- 촬영 금지시 VO 녹음

**힌트**
- ▶ 시작: 탑승 시
- ⏹ 정지: 하차 시
- 🎯 완료: 탑승 + 감정

**스타일**
- 톤: 밝고 경쾌 / 바이브: MZ / 타깃: 20대

<details><summary>더보기 (Pro)</summary>

**촬영(Pro)**
- 프레이밍: POV 고정
- 무브먼트: 최소화
- 노출/포커스: AE/AF 고정

**오디오(Pro)**
- 마이크 음소거

**대화/나레이션**
- "와! 정말 재미있어요!"
- "어떻게 이렇게 빠를 수 있어요?"
- "다시 타고 싶어요!"

**편집 힌트**
- 액션→슬로우모션

**안전/권한**
- 안전장치 필수 착용

**B-roll 제안**
- 탑승 전 표정
- 하차 후 표정
- 어트랙션 전체
</details>
''';
    }
  }
}
