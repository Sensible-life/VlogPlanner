# 📋 VlogPlanner TODO List

_마지막 업데이트: 2025-11-17_

---

## ✅ 완료된 작업

### 핵심 기능
- [x] **모델 구조 전면 개편**
  - Plan, CueCard 모델에 새로운 필드 추가
  - referenceVideoUrl, referenceVideoTimestamp 필드 추가
  - shot_composition, shooting_instructions 등 촬영 정보 필드

- [x] **Fine-tuned Model 통합**
  - OpenAI Fine-tuned model로 스토리보드 생성
  - JSON 응답 구조 통일
  - 프롬프트 최적화

- [x] **UI 대격변**
  - 새로운 컬러 시스템 (White, Black, Key Yellow)
  - 메인 페이지 리디자인
  - 사용자 입력 페이지 (3개 탭)
  - 스토리보드 페이지 (고정 상단 바 + 스크롤 컨텐츠)
  - 씬 리스트 페이지 (드롭다운 카드)

- [x] **DALL-E 스토리보드 이미지 생성**
  - 각 씬의 구도를 표현한 스케치 스타일 이미지
  - 자동 생성 및 storyboardImageUrl 저장
  - 비용: $0.04/이미지

- [x] **체크리스트 의미 변경**
  - 촬영 준비물 → 촬영 샷 확인 체크리스트
  - "이런 구도를 찍었니?" 용도로 변경
  - shot_composition과 연관

- [x] **YouTube 레퍼런스 검색 (옵션 1)**
  - YouTube Data API v3 통합
  - 씬 키워드 기반 자동 검색
  - referenceVideoUrl 자동 채우기
  - 간단한 timestamp 추정 로직

- [x] **비디오 저장 시스템**
  - 표준화된 파일명: `scene_{씬번호}_take_{테이크번호}_{timestamp}.mp4`
  - 이전 Take 검색 기능
  - 자동 Take 번호 증가

- [x] **카메라 페이지 전면 개편**
  - YouTube 레퍼런스 플레이어 (오른쪽 오버레이)
  - 이전 Take 플레이어 (왼쪽 오버레이)
  - 특정 timestamp부터 재생
  - 녹화 완료 시 자동 저장

---

## 🚀 진행 중 작업

_현재 진행 중인 작업 없음 (안정화 단계)_

---

## 📝 다음 작업 (우선순위 순)

### 1. Vision AI 기반 구도 매칭 (미래 구현)
**목표**: DALL-E 스케치와 유사한 YouTube 프레임 찾기

**구현 단계**:
1. DALL-E로 구도 스케치 생성 ✅ (완료)
2. YouTube Data API로 관련 영상 검색 ✅ (완료)
3. YouTube 영상의 프레임 추출 (ffmpeg 또는 YouTube API)
4. Cloud Vision API로 이미지 유사도 분석
5. 가장 비슷한 프레임의 timestamp 찾기

**필요한 것**:
- Cloud Vision API 키
- 프레임 추출 로직 (ffmpeg 또는 youtube-dl)
- 유사도 비교 알고리즘

**예상 비용**:
- Vision API: $1.50 per 1,000 images
- 씬당 10프레임 추출 → $0.015/씬
- 스토리보드(10씬): $0.15

**예상 시간**: 5-10분 (스토리보드 1개)

**우선순위**: 낮음 (현재 YouTube 검색으로 충분)

---

### 2. Veo 2 AI 비디오 생성 (프리미엄 기능)
**목표**: 각 씬의 정확한 레퍼런스 비디오를 AI로 생성

**구현 방식**:
- Google AI Studio의 Veo 2 API 사용
- 백그라운드 생성 (비동기)
- 완료 시 푸시 알림
- 사용자 선택 옵션: "YouTube 검색 (즉시)" vs "AI 생성 (고품질, 50분)"

**예상 시간**: 50분~1.5시간 (스토리보드 10씬)

**예상 비용**: $1~5 per 스토리보드 (정식 출시 후)

**구현 단계**:
1. Veo 2 API 접근 권한 확보 (현재 제한적 베타)
2. 백그라운드 작업 큐 구현
3. Firebase Cloud Messaging 푸시 알림
4. 비디오 다운로드 및 저장 로직
5. UI: "AI 비디오 생성 중..." 상태 표시

**우선순위**: 낮음 (API 접근 가능 시)

---

### 3. 추가 UI 개선

#### 3.1 씬 상세 페이지 개선
- [ ] 스토리보드 이미지 크게 표시
- [ ] 레퍼런스 비디오 임베드 플레이어
- [ ] 장소/비용/인원/시간 정보 카드
- [ ] 구도 정보 비주얼화

#### 3.2 카메라 페이지 개선
- [ ] 레퍼런스 비디오 재생 컨트롤 (재생/일시정지/탐색)
- [ ] 이전 Take 비교 모드 (Split Screen)
- [ ] 실시간 구도 가이드 오버레이
- [ ] 촬영 타이머 및 진행률

#### 3.3 스토리보드 페이지 개선
- [ ] 씬 순서 드래그 앤 드롭
- [ ] 씬 추가/삭제/편집 기능
- [ ] 스토리보드 버전 관리
- [ ] 스토리보드 공유 기능 (PDF/이미지)

#### 3.4 라이브러리 관리
- [ ] 이전 스토리보드 목록 보기
- [ ] 스토리보드 검색 및 필터링
- [ ] 즐겨찾기 기능
- [ ] 태그 시스템

**우선순위**: 중간

---

### 4. 코드 정리 및 리팩토링

#### 4.1 서비스 통합
- [ ] 이미지 서비스 통합
  - `image_service.dart` + `google_image_service.dart` → 하나로 통합
  - 중복 로직 제거

- [ ] 위치 서비스 정리
  - `location_service.dart` + `google_places_service.dart` 정리
  - 사용하지 않는 메서드 제거

- [ ] 스타일 파일 통합
  - `app_styles.dart` + `styles.dart` → 하나로 통합
  - 일관성 있는 스타일 적용

#### 4.2 불필요한 파일 제거
- [ ] `lib/screens/camera/camera_mode_page_old.dart` (백업 파일)
- [ ] 사용하지 않는 deprecated 파일들

#### 4.3 코드 품질 개선
- [ ] 에러 처리 강화
- [ ] 로딩 상태 관리 개선
- [ ] 네트워크 재시도 로직
- [ ] 오프라인 모드 지원

**우선순위**: 중간

---

### 5. 촬영 도우미 기능

#### 5.1 실시간 가이드
- [ ] 음성 안내 ("다음 샷: 클로즈업")
- [ ] 진동 피드백
- [ ] 구도 보조선 표시

#### 5.2 촬영 분석
- [ ] 손떨림 감지 및 경고
- [ ] 노출/초점 자동 조정 제안
- [ ] 촬영 품질 평가

#### 5.3 자동 편집 제안
- [ ] 베스트 Take 자동 선택
- [ ] 불필요한 부분 자동 감지
- [ ] BGM 추천

**우선순위**: 낮음

---

### 6. 고급 기능

#### 6.1 협업 기능
- [ ] 팀원 초대 및 역할 관리
- [ ] 실시간 촬영 진행 상황 공유
- [ ] 댓글 및 피드백 시스템

#### 6.2 템플릿 마켓플레이스
- [ ] 인기 스토리보드 템플릿 공유
- [ ] 템플릿 평가 및 리뷰
- [ ] 유료 프리미엄 템플릿

#### 6.3 AI 어시스턴트
- [ ] 촬영 중 실시간 조언
- [ ] 음성 명령 지원
- [ ] 자동 자막 생성

**우선순위**: 낮음 (장기 계획)

---

## 🐛 알려진 이슈

### 우선순위 높음
_현재 알려진 critical 이슈 없음_

### 우선순위 중간
- [ ] YouTube API 키가 없을 때 더 명확한 안내 메시지
- [ ] DALL-E 이미지 생성 실패 시 재시도 로직
- [ ] 비디오 저장 공간 부족 시 처리

### 우선순위 낮음
- [ ] Android 구형 기기에서 카메라 초기화 느림
- [ ] 긴 씬 제목 텍스트 오버플로우

---

## 📊 프로젝트 현황

### 전체 완료율: ~85%

#### 완료된 핵심 기능
- ✅ 스토리보드 생성 (Fine-tuned Model)
- ✅ DALL-E 이미지 생성
- ✅ YouTube 레퍼런스 검색
- ✅ 비디오 촬영 및 저장
- ✅ 이전 Take 관리
- ✅ 전체 UI 리디자인

#### 남은 주요 작업
- ⏳ Vision AI 구도 매칭 (선택사항)
- ⏳ Veo 2 비디오 생성 (선택사항)
- ⏳ UI 추가 개선
- ⏳ 코드 리팩토링

---

## 🎯 단기 목표 (1-2주)

1. **코드 정리 및 리팩토링**
   - 중복 코드 제거
   - 서비스 통합
   - 백업 파일 정리

2. **UI 추가 개선**
   - 씬 상세 페이지
   - 카메라 페이지 컨트롤

3. **에러 처리 강화**
   - API 실패 시 재시도
   - 명확한 에러 메시지
   - 오프라인 모드

---

## 🚀 중기 목표 (1-2개월)

1. **Vision AI 구도 매칭**
   - Cloud Vision API 통합
   - 프레임 추출 로직
   - 유사도 비교 알고리즘

2. **협업 기능**
   - 팀원 관리
   - 실시간 공유
   - 댓글 시스템

3. **템플릿 마켓플레이스**
   - 템플릿 공유 시스템
   - 평가 및 리뷰

---

## 🌟 장기 목표 (3-6개월)

1. **Veo 2 AI 비디오 생성**
   - API 접근 권한 확보
   - 백그라운드 생성 시스템
   - 프리미엄 기능 구현

2. **AI 어시스턴트**
   - 실시간 음성 조언
   - 음성 명령 지원
   - 자동 자막 생성

3. **앱 배포 및 마케팅**
   - Google Play Store 등록
   - App Store 등록
   - 사용자 피드백 수집

---

## 📌 참고 문서

- [API_KEY_SETUP.md](./API_KEY_SETUP.md) - API 키 설정 가이드
- [REFACTORING_PLAN.md](./REFACTORING_PLAN.md) - 리팩토링 계획 및 진행 상황
- [README.md](./README.md) - 프로젝트 개요

---

_이 문서는 지속적으로 업데이트됩니다._
